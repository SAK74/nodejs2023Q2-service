openapi: 3.0.0
paths:
  /user:
    get:
      operationId: UsersController_findAll
      summary: Get all users
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserDto"
        "401": &a1
          description: Unauthorized.
      tags: &a2
        - Users
    post:
      operationId: UsersController_create
      summary: Add user
      description: Add simple user
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserDto"
      responses:
        "201":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserDto"
        "400":
          description: Bad request
        "401": *a1
      tags: *a2
  "/user/{id}":
    get:
      operationId: UsersController_findOne
      summary: Get certain user
      description: Get user with id
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserDto"
        "400":
          description: Bad request
        "401": *a1
        "404":
          description: Entity not exist
      tags: *a2
    put:
      operationId: UsersController_passwChange
      summary: Change password
      description: Change user password
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePasswordDto"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserDto"
        "400":
          description: Bad request
        "401": *a1
        "403":
          description: Wrong password.
        "404":
          description: Entity not exist
      tags: *a2
    delete:
      operationId: UsersController_remove
      summary: Delete user
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "204":
          description: User has been deleted successfully
        "400":
          description: Bad request
        "401": *a1
        "404":
          description: Entity not exist
      tags: *a2
  /artist:
    get:
      operationId: ArtistsController_findAll
      summary: Get all artists
      description: Get all artists
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Artist"
        "401": &a3
          description: Unauthorized.
      tags: &a4
        - Artists
    post:
      operationId: ArtistsController_create
      summary: Add single artist
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateArtistDto"
      responses:
        "201":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Artist"
        "400":
          description: Bad request
        "401": *a3
      tags: *a4
  "/artist/{id}":
    get:
      operationId: ArtistsController_findOne
      summary: Get single artists
      description: Get single artists
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Artist"
        "400":
          description: Bad request
        "401": *a3
        "404":
          description: Entity not exist
      tags: *a4
    put:
      operationId: ArtistsController_update
      summary: Edit single artist
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateArtistDto"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Artist"
        "400":
          description: Bad request
        "401": *a3
        "404":
          description: Entity not exist
      tags: *a4
    delete:
      operationId: ArtistsController_remove
      summary: Delete artist entity
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "204":
          description: Entity has been deleted successfully
        "400":
          description: Bad request
        "401": *a3
        "404":
          description: Entity not exist
      tags: *a4
  /track:
    get:
      operationId: TracksController_findAll
      summary: Get all tracks
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Track"
      tags: &a5
        - Tracks
    post:
      operationId: TracksController_create
      summary: Add single track
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTrackDto"
      responses:
        "201":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Track"
        "400":
          description: Bad request
      tags: *a5
  "/track/{id}":
    get:
      operationId: TracksController_findOne
      summary: Get single track
      description: Get track by ID
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Track"
        "400":
          description: Bad request
        "404":
          description: Entity not exist
      tags: *a5
    put:
      operationId: TracksController_update
      summary: Edit single track
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTrackDto"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Track"
        "400":
          description: Bad request
        "404":
          description: Entity not exist
      tags: *a5
    delete:
      operationId: TracksController_remove
      summary: Delete single track
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "204":
          description: Entity has been deleted successfully
        "404":
          description: Entity not exist
      tags: *a5
  /album:
    get:
      operationId: AlbumsController_findAll
      summary: Get all albums
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Album"
        "401": &a6
          description: Unauthorized
      tags: &a7
        - Albums
    post:
      operationId: AlbumsController_create
      summary: Add single album
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAlbumDto"
      responses:
        "201":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Album"
        "400":
          description: Bad request
        "401": *a6
      tags: *a7
  "/album/{id}":
    get:
      operationId: AlbumsController_findOne
      summary: Get single album
      description: Get single album by id
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Album"
        "400":
          description: Bad request
        "401": *a6
        "404":
          description: Entity not found
      tags: *a7
    put:
      operationId: AlbumsController_update
      summary: Edit single album
      parameters:
        - name: id
          required: true
          in: path
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAlbumDto"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Album"
        "400":
          description: Bad request
        "401": *a6
        "404":
          description: Entity not found
      tags: *a7
    delete:
      operationId: AlbumsController_remove
      summary: Delete single album
      description: Delete album by id
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "204":
          description: Entity has been deleted successfully
        "400":
          description: Bad request
        "401": *a6
        "404":
          description: Entity not found
      tags: *a7
  "/favs/{member}/{id}":
    post:
      operationId: FavoritesController_addMemberToFavorite
      parameters:
        - name: member
          required: true
          in: path
          schema:
            type: string
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "201":
          description: ""
    delete:
      operationId: FavoritesController_removeFromFavs
      parameters:
        - name: member
          required: true
          in: path
          schema:
            type: string
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "204":
          description: ""
  /favs:
    get:
      operationId: FavoritesController_findAll
      parameters: []
      responses:
        "200":
          description: ""
  /auth/signup:
    post:
      operationId: AuthController_signup
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserDto"
      responses:
        "201":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserDto"
  /auth/login:
    post:
      operationId: AuthController_login
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserDto"
      responses:
        "200":
          description: ""
  /auth/refresh:
    post:
      operationId: AuthController_refresh
      parameters: []
      responses:
        "200":
          description: ""
info:
  title: Home Library Service
  description: Home music library service
  version: 1.0.0
  contact: {}
tags: []
servers: []
components:
  securitySchemes:
    bearer:
      scheme: bearer
      bearerFormat: JWT
      type: http
  schemas:
    UserDto:
      type: object
      properties:
        createdAt:
          type: number
          example: 1696957943351
        updatedAt:
          type: number
          example: 1696957943352
        version:
          type: number
          example: 1
        id:
          type: string
          format: uuid
        login:
          type: string
          example: Mike12
      required:
        - createdAt
        - updatedAt
        - version
        - id
        - login
    CreateUserDto:
      type: object
      properties:
        login:
          type: string
          description: User login
        password:
          type: string
          description: User password
      required:
        - login
        - password
    UpdatePasswordDto:
      type: object
      properties:
        oldPassword:
          type: string
        newPassword:
          type: string
      required:
        - oldPassword
        - newPassword
    Artist:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: John Lenon
        grammy:
          type: boolean
      required:
        - id
        - name
        - grammy
    CreateArtistDto:
      type: object
      properties:
        name:
          type: string
        grammy:
          type: boolean
      required:
        - name
        - grammy
    Track:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Oh My Love
        artistId:
          type: string
          nullable: true
          format: uuid
        albumId:
          type: string
          nullable: true
          format: uuid
        duration:
          type: number
          example: 229
          description: duration in sec
      required:
        - id
        - name
        - duration
    CreateTrackDto:
      type: object
      properties:
        name:
          type: string
          example: Oh My Love
        artistId:
          type: string
          nullable: true
          format: uuid
        albumId:
          type: string
          nullable: true
          format: uuid
        duration:
          type: number
          example: 229
          description: duration in sec
      required:
        - name
        - duration
    Album:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Imagine
        year:
          type: number
          example: 1971
        artistId:
          type: string
          nullable: true
          format: uuid
      required:
        - id
        - name
        - year
    CreateAlbumDto:
      type: object
      properties:
        name:
          type: string
          example: Imagine
        year:
          type: number
          example: 1971
        artistId:
          type: string
          nullable: true
          format: uuid
      required:
        - name
        - year
